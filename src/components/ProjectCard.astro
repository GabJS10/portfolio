---
import { techIcons } from '@/constants/icons';
interface Props {
  title: string;
  description: string;
  date: string;
  image: string;
  url: string;
  technologies: string[]; 
  reverse?: boolean; 
}

const { title, url, date, description, image, technologies, reverse = false } = Astro.props;

// Un pequeño diccionario para mapear nombres a SVGs. 
// A futuro puedes usar una librería como 'astro-icon', pero esto sirve por ahora.

---

<div class={`flex flex-col ${reverse ? 'md:flex-row-reverse' : 'md:flex-row'} items-center gap-12 md:gap-24`}>
  
  <div class="flex-1 text-center md:text-left space-y-6">
    <h3 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400">
      {title}
    </h3>
    <p class="text-gray-200 leading-relaxed">
      {description}
    </p>

    <div class="flex justify-between gap-3">
    <div class="flex justify-center md:justify-start items-center gap-4 pt-4">
        {technologies.map(techName => {
            // Buscamos el SVG en nuestro diccionario
            const svgContent = techIcons[techName.toLowerCase()] || techIcons.default;
            return (
                // Contenedor del icono con tooltip simple al hacer hover
                <div class="w-10 h-10 p-2 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 hover:border-blue-500/50 hover:scale-110 transition-all duration-300 text-gray-300 hover:text-blue-400" title={techName}>
                 <Fragment set:html={svgContent} />
                </div>
            )
        })}
    </div>
    <p class="align-bottom pt-6 text-gray-200 leading-relaxed">{date}</p>
    </div>
  </div>

  <div class="flex-1 relative group">
    <div class="absolute -inset-2 bg-blue-600/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition duration-500"></div>
    
    <a href={url} target="_blank" rel="noopener noreferrer">
    <img 
      src={image} 
      alt={`Captura de pantalla del proyecto ${title}`} 
      class="relative rounded-2xl border border-white/10 shadow-2xl shadow-black/50 overflow-hidden hover:scale-[1.02] transition-transform duration-500"
    />
    </a>
  </div>
</div>